Ονομα:Hλιας
Επιθετο:Bεργος
Α.Μ: 1115201400266


							ΕΠΕΞΗΓΗΣΗ ΑΣΚΗΣΗΣ 2 ΠΡΟΓΡΑΜΜΑΤΙΣΜΟΣ ΣΥΣΤΗΜΑΤΟΣ

Προγραμματιστικο Περιβαλλον:Linux
Eντολες μεταγλωττισης:
	gcc -o jms_coord jms_coord.c
	gcc -o jms_console jms_console.c
	gcc -o pool pool.c
	gcc -o job job.c
Για την μεταγλωττιση των προγραμματων μου εχω φτιαξει ενα ακομα bash script με το ονομα compile.sh.
Eπομενως για να μεταγλωτισω απλα τρεχω το script αυτο.

Eντολες (τυχαιες) εκτελεσης: 
	./jms_coord -l /home/user/folder/ -n 3 -w pipe_in -r pipe_out &
	./jms_console -w pipe_in -r pipe_out -o operations
	bash jms_script.sh -l /home/user/folder/ -c purge

ΟΛΕΣ ΟΙ ΠΛΗΡΟΦΟΡΙΕΣ ΠΟΥ ΧΡΕΙΑΣΤΗΚΑ ΗΤΑΝ ΑΠΟ ΤΙΣ ΔΙΑΦΑΝΕΙΕΣ ΤΟΥ ΜΑΘΗΜΑΤΟΣ ΚΑΙ ΑΠΟ ΤΟ ΒΙΒΛΙΟ ΤΟΥ ROCHKIND ΠΡΟΓΡΑΜΜΑΤΙΣΜΟΣ ΣΕ UNIX.

ΠΙΝΑΚΑΣ ΑΡΙΘΜΟΥ ΠΡΩΤΟΚΟΛΛΟΥ ΓΙΑ ΤΙΣ ΣΥΝΑΡΤΗΣΕΙΣ:
0)ERROR
1)SUMBIT
2)STATUS
3)STATUS-ALL
4)SHOW-ACTIVE
5)SHOW-POOLS
6)SHOW-FINISHED
7)SUSPEND
8)RESUME 
9)SHUTDOWN
OTAN ΚΑΠΟΙΟ ΑΠΟ ΤΑ ΠΡΟΓΡΑΜΜΑΤΑ (COORD ,POOL,CONSOLE) ΠΑΡΕΙ ΚΑΠΟΙΟ ΑΠΟ ΑΥΤΟΥΣ ΤΟΥΣ ΠΑΡΑΠΑΝΩ ΑΡΙΘΜΟΥΣ ΤΟΤΕ ΠΑΡΑΠΕΜΠΕΙ ΚΑΙ ΣΤΗΝ ΑΝΤΙΣΤΟΙΧΗ ΣΥΝΑΡΤΗΣΗ.

ΠΕΡΙΓΡΑΦΗ ΤΗΣ ΑΣΚΗΣΗΣ:

ΑΡΧΙΚΑ ΤΡΕΧΩ ΤΟ COORD.ΤΟ COORD ΤΡΕΧΕΙ ΣΥΝΕΧΩΣ ΜΕΣΑ ΣΕ ΜΙΑ FOR(;;).ΣΤΗΝ ΑΡΧΗ ΕΛΕΝΧΕΙ ΑΝ ΥΠΑΡΧΕΙ ΕΝΤΟΛΗ ΑΠΟ ΤΟ CONSOLE.ΑΝ ΔΕΝ ΥΠΑΡΧΕΙ ΤΟΤΕ ΠΑΕΙ ΚΑΙ ΚΟΙΤΑ ΑΝ ΤΟΥ ΕΧΟΥΝ ΔΩΣΕΙ ΚΑΠΟΙΑ ΠΛΗΡΟΦΟΡΙΑ ΤΑ POOLS ΠΟΥ ΕΧΕΙ(ΑΝ ΕΧΕΙ).
ΑΝ ΜΑΣ ΔΟΘΕΙ ΕΝΤΟΛΗ ΑΠΟ ΤΟ CONSOLE ΤΟΤΕ ΔΙΑΒΑΖΩ ΤΗΝ ΕΝΤΟΛΗ ΑΠΟ ΤΟ 1ο READ ΚΑΙ ΜΕΤΑ ΑΝΑΛΟΓΑ ΠΟΙΑ ΕΝΤΟΛΗ ΕΧΕΙ ΕΡΘΕΙ ΜΠΑΙΝΩ ΚΑΙ ΣΤΗΝ ΚΑΤΑΛΛΗΛΗ ΣΥΝΘΗΚΗ.Η ΥΛΟΠΟΙΗΣΗ ΠΟΥ ΕΧΩ ΚΑΝΕΙ ΧΡΗΣΙΜΟΠΟΙΕΙ ΤΑ POOLS ΜΟΝΟ ΓΙΑ ΝΑ ΚΑΝΕΙ SUSPEND ,RESUME KAI SUMBIT.ΟΛΕΣ ΟΙ ΑΛΛΕΣ ΕΝΤΟΛΕΣ ΠΡΑΓΜΑΤΟΠΟΙΟΥΝΤΑΙ ΣΤΟΝ COORD ΜΙΑΣ ΚΑΙ ΚΡΑΤΩ ΠΛΗΡΟΦΟΡΙΕΣ ΓΙΑ ΤΑ JOBS ΜΕΣΑ ΣΕ ΑΥΤΟΝ.ΕΠΟΜΕΝΩΣ ΓΙΑ ΤΙΣ 3 ΠΑΡΑΠΑΝΩ ΕΝΤΟΛΕΣ ΤΟ ΠΡΩΤΟΚΟΛΛΟ ΕΧΕΙ ΩΣ ΕΞΗΣ:ΓΡΑΦΩ ΣΤΟ POOL ΠΟΥ ΠΡΕΠΕΙ ΤΗΝ ΕΝΤΟΛΗ ΠΟΥ ΕΧΕΙ ΕΡΘΕΙ ΚΑΙ ΤΟ JOBID.TO POOL ΜΕ ΤΗΝ ΣΕΙΡΑ ΤΟΥ ΔΙΑΒΑΖΕΙ ΤΗΝ ΕΝΤΟΛΗ ΚΑΙ ΤΟ JOBID KAI ΕΚΤΕΛΕΙ ΤΗΝ ΕΝΟΛΗ ΑΥΤΗ.ΜΟΛΙΣ ΤΕΛΕΙΩΣΕΙ Η ΕΚΤΕΛΕΣΗ ΤΗΣ ΕΝΤΟΛΗΣ ΣΤΕΛΝΕΙ ΣΤΟΝ COORD ΠΙΣΩ TIΣ ΑΠΑΡΑΙΤΗΤΕΣ ΠΛΗΡΟΦΟΡΙΕΣ ΠΟΥ ΧΡΕΙΑΖΕΤΑΙ.ΔΗΛΑΔΗ ΑΝ ΕΡΘΕΙ Η ΕΝΤΟΛΗ SUSPEND 2 ΤΟΤΕ ΘΑ ΣΤΕΙΛΕΙ ΠΙΣΩ ΣΤΟΝ COORD ΤΟ 7(ΒΛΕΠΕ ΠΙΝΑΚΑ ΠΑΝΩ),ΤΟ PID THΣ ΔΙΕΡΓΑΣΙΑΣ ΠΟΥ ΔΙΕΚΟΨΕ ΚΑΙ ΠΟΣΟ ΧΡΟΝΟ ΗΤΑΝ ΕΝΕΡΓΟ ΜΕΧΡΙ ΝΑ ΓΙΝΕΙ SUSPEND.ΤΟ ΙΔΙΟ ΓΙΝΕΤΑΙ ΚΑΙ ΜΕ ΤΙΣ ΑΛΛΕΣ 2 ΣΥΝΑΡΤΗΣΕΙΣ RESUME,SUMBIT.ΤΩΡΑ Ο COORD ΟΣΟ XΡΟΝΟ ΚΑΝΕΙ ΤΟ POOL ΓΙΑ ΝΑ ΤΟΥ ΕΠΙΣΤΡΕΨΕΙ ΤΙΣ ΠΛΗΡΟΦΟΡΙΕΣ ΔΕΝ ΜΠΟΡΕΙ ΝΑ ΔΙΑΒΑΣΕΙ ΑΛΛΗ ΕΝΤΟΛΗ ΓΙΑΤΙ ΔΕΝ ΣΤΕΛΝΕΙ ΤΟ CONSOLE ΑΛΛΗ ΕΝΤΟΛΗ ΜΕΧΡΙ ΝΑ ΠΑΡΕΙ ΑΠΟΤΕΛΕΣΜΑΤΑ ΑΠΟ ΤΗΝ ΠΡΟΗΓΟΥΜΕΝΗ ΕΝΤΟΛΗ.ΕΠΟΜΕΝΩΣ ,ΟΠΩΣ ΑΝΕΦΕΡΑ ΚΑΙ ΠΑΡΑΠΑΝΩ ΑΝ ΔΕΝ ΔΙΑΒΑΣΕΙ ΑΠΟ ΤΟ CONSOLE ΠΑΕΙ ΚΑΙ ΚΟΙΤΑ ΑΝ ΤΟΥ ΕΧΟΥΝ ΣΤΕΙΛΕΙ ΤΙΠΟΤΑ ΤΑ POOLS.TA POOLS ΜΠΟΡΟΥΝ ΝΑ ΕΠΙΣΤΡΕΨΟΥΝ ΣΑΝ ΑΠΟΤΕΛΕΣΜΑ ΣΤΟΝ COORD 4 ΠΡΑΓΜΑΤΑ ΜΕ ΚΑΠΟΙΟ ΚΩΔΙΚΟ ΠΡΩΤΟΚΟΛΛΟΥ ΠΟΥ ΔΙΑΦΕΡΕΙ ΣΕ ΕΝΑ ΣΗΜΕΙΟ ΑΠΟ ΤΟΝ ΠΙΝΑΚΑ ΠΑΡΑΠΑΝΩ.ΑΝ ΤΟ POOL ΕΠΙΣΤΡΕΨΕΙ ΣΤΟΝ COORD 1-->SUMBIT ,7-->SUSPEND,8-->RESUME.AYTA ΕΙΝΑΙ ΙΔΙΑ ,ΤΟ ΜΟΝΟ ΠΟΥ ΑΛΛΑΖΕΙ ΕΙΝΑΙ ΟΤΑΝ ΣΤΕΛΝΕΙ ΤΟ 2.ΑΝ ΣΤΕΙΛΕΙ 2 ΤΟΤΕ ΣΗΜΑΙΝΕΙ ΟΤΙ ΤΟ STATUS AΠΟ ΚΑΠΟΙΟ JOB ΕΧΕΙ ΑΛΛΑΞΕΙ ΚΑΙ ΕΤΣΙ Ο COORD ΠΡΕΠΕΙ ΝΑ ΕΝΗΜΕΡΩΘΕΙ.ΑΥΤΗ Η ΕΝΗΜΕΡΩΣΗ ΓΙΝΕΤΑΙ ΣΥΝΕΧΩΣ ΣΤΟ COORD ΚΑΙ ΓΙΑΥΤΟ ΤΟΝ ΛΟΓΟ ΔΕΝ ΑΝΑΤΡΕΧΩ ΣΤΟ POOL ΓΙΑ ΤΙΣ ΥΠΟΛΟΙΠΕΣ ΣΥΝΑΡΤΗΣΕΙΣ.ΣΕ ΑΥΤΟ ΤΟ ΣΗΜΕΙΟ ,ΟΤΑΝ ΔΗΛΑΔΗ ΣΤΑΛΘΕΙ ΤΟ 2,ΤΟΤΕ ΜΠΟΡΩ ΝΑ ΚΑΤΑΛΑΒΩ ΚΙΟΛΑΣ ΑΝ ΕΝΑ POOL ΤΕΡΜΑΤΙΣΕ ΟΛΕΣ ΤΟΥ ΤΙΣ ΔΟΥΛΕΙΕΣ.ΑΝ ΤΙΣ ΕΧΕΙ ΤΕΡΜΑΤΙΣΕΙ ΤΟΤΕ ΣΤΕΛΝΩ ΣΗΜΑ SIGTERM ΣΤΟ POOL ME DEFAULT SIGNAL HANDLER ΚΑΙ ΥΣΤΕΡΑ ΤΟ POOL ΤΕΡΜΑΤΙΖΕΙ.Ο COORD ΜΟΛΙΣ ΠΑΡΕΙ ΠΛΗΡΟΦΟΡΙΑ ΑΠΟ ΤΟ POOL ΓΙΑ ΚΑΘΕΝΑ ΑΠΟ ΤΑ SUMBIT,RESUME,SUSPEND ΣΤΕΛΝΕΙ ΚΑΙ ΑΥΤΟΣ ΜΕ ΤΗΝ ΣΕΙΡΑ ΤΟΥ ΠΛΗΡΟΦΟΡΙΕΣ ΠΙΣΩ ΣΤΟ CONSOLE ΕΤΣΙ ΩΣΤΕ ΝΑ ΕΚΤΥΠΩΘΟΥΝ .ΜΟΛΙΣ TO CONSOLE ΠΑΡΕΙ ΤΙΣ ΠΛΗΡΟΦΟΡΙΕΣ ΚΑΙ ΤΙΣ ΕΚΤΥΠΩΣΕΙ ΤΟΤΕ ΕΙΝΑΙ ΕΤΟΙΜΟ ΝΑ ΔΙΑΒΑΣΕΙ ΤΗΝ ΕΠΟΜΕΝΗ ΕΝΤΟΛΗ.ΓΙΑ ΤΙΣ 3 ΑΥΤΕΣ ΣΥΝΑΡΤΗΣΕΙΣ ΑΥΤΗ ΕΙΝΑΙ Η ΔΙΑΔΙΚΑΣΙΑ.ΓΙΑ ΤΙΣ ΥΠΟΛΟΙΠΕΣ ,ΑΦΟΥ Ο COORD ΚΡΑΤΑ ΠΛΗΡΟΦΟΡΙΑ ΓΙΑ ΤΑ JOBS KAI ΓΙΑ TA POOLS ΣΥΛΛΕΓΕΙ ΤΙΣ ΠΛΗΡΟΦΟΡΙΕΣ ΠΟΥ ΧΡΕΙΑΖΟΝΤΑΙ ΚΑΙ ΤΙΣ ΣΤΕΛΝΕΙ ΑΜΕΣΑ ΠΙΣΩ ΣΤΟ CONSOLE ΧΡΗΣΙΜΟΠΟΙΩΝΤΑΣ ΩΣ ΠΡΩΤΟΚΟΛΛΟ ΤΟ ΠΙΝΑΚΑ ΠΑΡΑΠΑΝΩ.ΔΗΛΑΔΗ ΑΝΑΛΟΓΑ ΜΕ ΤΟ ΠΟΙΑ ΣΥΝΑΡΤΗΣΗ ΥΛΟΠΟΙΩ ΣΤΕΛΝΩ ΚΑΙ ΤΟΝ ΚΑΤΑΛΛΗΛΟ ΑΡΙΘΜΟ ΚΑΙ ΥΣΤΕΡΑ ΤΙΣ ΠΛΗΡΟΦΟΡΙΕΣ ΠΟΥ ΧΡΕΙΑΖΕΤΑΙ.ΟΣΟ ΑΝΑΦΟΡΑ ΤΗΝ ΚΛΗΣΗ SHUTDOWN ,ΟΤΑΝ ΚΑΛΕΙΤΑΙ ΣΤΟΝ COORD TOTE ΣΤΕΛΝΩ ΣΗΜΑ SIGTERM ΣΕ ΟΛΑ TA POOLS ΚΑΙ ΑΥΤΑ ΜΕ ΤΗΝ ΣΕΙΡΑ ΤΟΥΣ ΣΕ ΟΛΑ ΤΑ ΕΝΡΓΑ JOBS TOYΣ.ΑΥΤΟ ΕΠΙΤΥΓΧΑΝΕΤΑΙ ΜΕ ΚΑΤΑΛΛΗΛΟ SIGNAL HANDLER ΠΟΥ ΣΤΗΝ ΔΙΚΙΑ ΜΟΥ ΥΛΟΠΟΙΗΣΗ ΕΙΝΑΙ ΜΙΑ ΣΥΝΑΡΤΗΣΗ ΠΟΥ ΜΕΤΑΤΡΕΠΕΙ ΜΙΑ GLOABAL ΜΕΤΑΒΛΗΤΗ (FLAG) AΠΟ 0 ΣΕ 1.ΚΑΙ ΜΟΛΙΣ ΓΙΝΕΙ 1 ΤΟΤΕ ΟΥΣΙΑΣΤΙΚΑ ΕΚΤΕΛΕΙΤΑΙ ΤΟ SHUTDOWN.AKOMA TO CONSOLE ΕΙΝΑΙ ΕΤΣΙ ΦΤΙΑΧΜΕΝΟ ΕΤΣΙ ΩΣΤΕ ΑΝ ΔΕΝ ΔΩΔΕΙ ΑΡΧΕΙΟ OPERATIONS Ή ΔΟΘΕΙ ΛΑΘΟΣ ΑΡΧΕΙΟ ΝΑ ΠΑΙΡΝΕΙ ΕΝΤΟΛΕΣ ΑΠΟ ΤΟ STDIN.ΑΠΟ ΤΟ STDIN ΠΑΙΡΝΕΙ ΕΠΙΣΗΣ ΕΝΤΟΛΕΣ ΚΑΙ ΣΤΟ ΤΕΛΟΣ ΤΟΥ ΠΡΟΓΡΑΜΜΑΤΟΣ.
